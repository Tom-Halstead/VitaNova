# Application name
spring.application.name=vitanova-backend

################################################################################
# Datasource / Flyway
################################################################################
spring.datasource.url=jdbc:postgresql://vitanovadb.c78c84w2om5e.us-east-2.rds.amazonaws.com:5432/vitanova
spring.datasource.username=billythekid
spring.datasource.password=B1llyTh3K1d1993!
spring.jpa.hibernate.ddl-auto=none

# Flyway migrations
spring.flyway.locations=classpath:db/migration
spring.flyway.enabled=true

################################################################################
# OAuth2 Client Registration (login via Cognito)
################################################################################
spring.security.oauth2.client.registration.cognito.client-id=2j12r8o421t03pnhhm0hjfi5qu
spring.security.oauth2.client.registration.cognito.client-secret=9tol2f9shtf0829pckul3i68r2jerbj1j82tk7i6psdnmrcn4c0
spring.security.oauth2.client.registration.cognito.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.cognito.scope=openid,profile,email
spring.security.oauth2.client.registration.cognito.redirect-uri=http://localhost:8080/login/oauth2/code/cognito
spring.security.oauth2.client.registration.cognito.provider=cognito

################################################################################
# OAuth2 Provider ? manual endpoints (avoids discovery failures)
################################################################################
spring.security.oauth2.client.provider.cognito.authorization-uri=https://us-east-2d1agk3shc.auth.us-east-2.amazoncognito.com/oauth2/authorize
spring.security.oauth2.client.provider.cognito.token-uri=https://us-east-2d1agk3shc.auth.us-east-2.amazoncognito.com/oauth2/token
spring.security.oauth2.client.provider.cognito.jwk-set-uri=https://us-east-2d1agk3shc.auth.us-east-2.amazoncognito.com/.well-known/jwks.json
spring.security.oauth2.client.provider.cognito.user-info-uri=https://us-east-2d1agk3shc.auth.us-east-2.amazoncognito.com/oauth2/userInfo
spring.security.oauth2.client.provider.cognito.user-name-attribute=sub

################################################################################
# Resource Server (validate JWTs on /api/**)
################################################################################
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=https://us-east-2d1agk3shc.auth.us-east-2.amazoncognito.com/.well-known/jwks.json
spring.security.oauth2.resourceserver.jwt.issuer-uri=https://cognito-idp.us-east-2.amazonaws.com/us-east-2_AbCdEfG123
