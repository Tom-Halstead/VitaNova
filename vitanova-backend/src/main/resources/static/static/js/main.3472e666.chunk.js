(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{251:function(e,t,a){e.exports=a(475)},474:function(e,t,a){},475:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(236),c=a.n(r),o=a(18),s=a(3),m=a(68);function i(){const[e,t]=Object(n.useState)("light");Object(n.useEffect)(()=>{const e=document.documentElement.getAttribute("data-theme");e&&t(e)},[]);return l.a.createElement("button",{onClick:async()=>{const a="light"===e?"dark":"light";await Object(m.toggleTheme)(a),document.documentElement.setAttribute("data-theme",a),t(a)},className:"p-2 rounded bg-gray-200 hover:bg-gray-300"},"light"===e?"\ud83c\udf19":"\u2600\ufe0f")}function d(){return!!localStorage.getItem("token")}function u(){return"/"===Object(s.o)().pathname?null:l.a.createElement("nav",{className:"bg-white shadow px-6 py-4 sticky top-0 z-10"},l.a.createElement("div",{className:"max-w-7xl mx-auto flex justify-between items-center"},l.a.createElement("div",{className:"flex space-x-6"},l.a.createElement(o.c,{to:"/dashboard",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold border-b-2 border-indigo-600":"text-gray-600 hover:text-indigo-600"}},"Dashboard"),l.a.createElement(o.c,{to:"/new-entry",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"New Entry"),l.a.createElement(o.c,{to:"/entries",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Entries"),l.a.createElement(o.c,{to:"/insights-goals",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Reflective Insights & Goals"),l.a.createElement(o.c,{to:"/settings",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Settings")),l.a.createElement("div",{className:"flex items-center space-x-4"},l.a.createElement(i,null),d()&&l.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),window.location="/"},className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600"},"Logout"))))}function g(e){let{children:t}=e;const[a,r]=Object(n.useState)("checking");return Object(n.useEffect)(()=>{fetch("http://localhost:8080/api/users/me",{credentials:"include"}).then(e=>{e.ok?r("ok"):r("fail")}).catch(()=>r("fail"))},[]),"checking"===a?l.a.createElement("div",null,"Loading\u2026"):"fail"===a?l.a.createElement(s.a,{to:"/",replace:!0}):t}function E(){return l.a.createElement("div",{className:"home-container"},l.a.createElement("h1",{className:"text-4xl font-bold text-indigo-600 mb-4"},"Welcome to Vita Nova"),l.a.createElement("p",{className:"text-lg text-gray-700 mb-8"},"Track your mood, journal entries, and goals effortlessly."),l.a.createElement("a",{href:"/oauth2/authorization/cognito",className:"btn btn-primary",rel:"noopener noreferrer"},"Sign In / Sign Up"))}var b=a(97),h=a(477),p=a(478),f=a(248),x=a(249),v=a(45),y=a(247);function N(e){let{data:t}=e;return l.a.createElement(h.a,{width:"100%",height:300},l.a.createElement(p.a,{data:t},l.a.createElement(f.a,{dataKey:"date"}),l.a.createElement(x.a,null),l.a.createElement(v.a,null),l.a.createElement(y.a,{type:"monotone",dataKey:"avgMoodPre",stroke:"#8884d8"}),l.a.createElement(y.a,{type:"monotone",dataKey:"avgMoodPost",stroke:"#82ca9d"})))}function w(e){let{title:t,className:a="",children:n}=e;return l.a.createElement("div",{className:`${a} p-6 bg-white rounded shadow`},l.a.createElement("h3",{className:"text-sm text-gray-500 mb-2"},t),n)}function j(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Object(b.fetchSummary)().then(t)},[]),l.a.createElement(N,{data:e})}function O(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Object(b.fetchMoodTrend)().then(t)},[]),l.a.createElement(N,{data:e})}function S(){return l.a.createElement("div",{className:"text-gray-600"},"Insights coming soon.")}function k(){var e,t,a;const[r,c]=Object(n.useState)({});return Object(n.useEffect)(()=>{Object(b.fetchSummary)().then(c)},[]),l.a.createElement("div",{className:"space-y-8"},l.a.createElement("nav",{className:"flex space-x-6 border-b pb-3"},l.a.createElement(o.c,{end:!0,to:"",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Timeline"),l.a.createElement(o.c,{to:"trends",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Trends"),l.a.createElement(o.c,{to:"insights",className:e=>{let{isActive:t}=e;return t?"text-indigo-600 font-semibold":"text-gray-600 hover:text-indigo-600"}},"Insights")),l.a.createElement("div",{className:"space-y-6"},l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",element:l.a.createElement(j,null)}),l.a.createElement(s.b,{path:"trends",element:l.a.createElement(O,null)}),l.a.createElement(s.b,{path:"insights",element:l.a.createElement(S,null)}))),l.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6"},l.a.createElement(w,{title:"Total Entries",className:"card"},l.a.createElement("div",{className:"value"},null!==(e=r.totalEntries)&&void 0!==e?e:"\u2014")),l.a.createElement(w,{title:"Avg Mood Pre",className:"card"},l.a.createElement("div",{className:"value"},null!==(t=r.avgMoodPre)&&void 0!==t?t:"\u2014")),l.a.createElement(w,{title:"Current Streak",className:"card"},l.a.createElement("div",{className:"value"},null!==(a=r.currentStreak)&&void 0!==a?a:"\u2014"))))}function C(e){let{label:t,value:a,onChange:n}=e;return l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-sm text-gray-700"},t),l.a.createElement("input",{type:"range",min:"1",max:"5",value:a,onChange:e=>n(+e.target.value),className:"w-full"}),l.a.createElement("div",{className:"text-center text-gray-600 mt-1"},a))}function A(e){let{onFiles:t}=e;return l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{className:"block text-sm text-gray-700 mb-1"},"Upload Photos"),l.a.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>t(e.target.files),className:""}))}var I=a(59);function P(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[c,o]=Object(n.useState)(3),[s,m]=Object(n.useState)(3),[i,d]=Object(n.useState)([]);return l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const n=new FormData;n.append("text",e),n.append("entryDate",a),n.append("moodPre",c),n.append("moodPost",s),Array.from(i).forEach(e=>n.append("photos[]",e)),await Object(I.createEntry)(n)},className:"space-y-6 max-w-xl mx-auto p-4 bg-white rounded shadow"},l.a.createElement("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Write your journal entry...",className:"w-full h-32 border rounded p-3 focus:border-indigo-600"}),l.a.createElement("div",{className:"flex flex-col sm:flex-row sm:space-x-4"},l.a.createElement("input",{type:"date",value:a,onChange:e=>r(e.target.value),className:"border rounded p-2 flex-1 focus:border-indigo-600"}),l.a.createElement("div",{className:"flex-1"},l.a.createElement(C,{label:"Mood Before",value:c,onChange:o})),l.a.createElement("div",{className:"flex-1"},l.a.createElement(C,{label:"Mood After",value:s,onChange:m}))),l.a.createElement(A,{onFiles:d}),l.a.createElement("button",{type:"submit",className:"btn btn-primary w-full"},"Save Entry"))}function T(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{Object(I.listEntries)(0,10).then(t)},[]),l.a.createElement("div",{className:"p-4 space-y-4"},l.a.createElement("h2",{className:"text-2xl font-semibold"},"Your Entries"),l.a.createElement("ul",{className:"divide-y"},e.map(e=>l.a.createElement("li",{key:e.entryId,className:"py-2"},l.a.createElement(o.b,{to:`/entries/${e.entryId}`,className:"text-indigo-600 hover:underline"},e.entryDate,": ",e.text.slice(0,30),"...")))))}function M(){const{id:e}=Object(s.s)(),[t,a]=Object(n.useState)(null);return Object(n.useEffect)(()=>{Object(I.getEntry)(e).then(a)},[e]),t?l.a.createElement("div",{className:"p-6 space-y-4 bg-white rounded shadow max-w-2xl mx-auto"},l.a.createElement("h2",{className:"text-2xl font-semibold"},"Entry on ",t.entryDate),l.a.createElement("p",{className:"text-gray-700 whitespace-pre-wrap"},t.text),l.a.createElement("div",{className:"flex space-x-4"},l.a.createElement("div",{className:"flex-1"},l.a.createElement(C,{label:"Mood Before",value:t.moodPre,onChange:()=>{}})),l.a.createElement("div",{className:"flex-1"},l.a.createElement(C,{label:"Mood After",value:t.moodPost,onChange:()=>{}}))),l.a.createElement("div",{className:"grid grid-cols-3 gap-2"},t.photos.map(e=>l.a.createElement("img",{key:e.photoId,src:e.url,alt:"Entry",className:"w-full h-24 object-cover rounded"})))):l.a.createElement("div",{className:"p-4"},"Loading...")}function D(){const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(""),[c,o]=Object(n.useState)(0),[s,m]=Object(n.useState)("");Object(n.useEffect)(()=>{(async function(){return fetch("/api/goals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>e.json())})().then(t)},[]);const i=async a=>{const n=e.find(e=>e.goalId===a),l=await async function(e,t){return fetch(`/api/goals/${e}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(t)}).then(e=>e.json())}(a,{currentValue:n.currentValue+1});t(e=>e.map(e=>e.goalId===a?l:e))};return l.a.createElement("div",{className:"p-6 space-y-6"},l.a.createElement("h2",{className:"text-2xl font-semibold"},"Reflective Insights & Goals"),l.a.createElement("div",{className:"flex space-x-2"},l.a.createElement("input",{type:"text",placeholder:"Goal type",value:a,onChange:e=>r(e.target.value),className:"border p-2 rounded flex-1 focus:border-indigo-600"}),l.a.createElement("input",{type:"number",placeholder:"Target",value:c,onChange:e=>o(+e.target.value),className:"border p-2 rounded w-24 focus:border-indigo-600"}),l.a.createElement("input",{type:"date",value:s,onChange:e=>m(e.target.value),className:"border p-2 rounded focus:border-indigo-600"}),l.a.createElement("button",{onClick:async()=>{const e=await async function(e){return fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(e)}).then(e=>e.json())}({type:a,targetValue:c,dueDate:s});t(t=>[...t,e]),r(""),o(0),m("")},className:"btn btn-primary"},"Add Goal")),l.a.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.map(e=>l.a.createElement(w,{key:e.goalId,title:e.type,className:"card"},l.a.createElement("div",{className:"text-lg font-medium"},e.currentValue,"/",e.targetValue),l.a.createElement("button",{onClick:()=>i(e.goalId),className:"mt-2 px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700"},"+1")))))}function B(){return l.a.createElement("div",{className:"p-6 bg-white rounded shadow max-w-md mx-auto space-y-4"},l.a.createElement("h2",{className:"text-2xl font-semibold"},"Settings & Privacy"),l.a.createElement("button",{onClick:m.exportData,className:"btn btn-primary w-full"},"Export My Data"),l.a.createElement("button",{onClick:m.deleteAccount,className:"btn btn-danger w-full"},"Delete My Account"))}function F(){return l.a.createElement(o.a,null,l.a.createElement(u,null),l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/",element:l.a.createElement(E,null)}),l.a.createElement(s.b,{path:"/dashboard/*",element:l.a.createElement(g,null,l.a.createElement(k,null))}),l.a.createElement(s.b,{path:"/new-entry",element:l.a.createElement(g,null,l.a.createElement(P,null))}),l.a.createElement(s.b,{path:"/entries",element:l.a.createElement(g,null,l.a.createElement(T,null))}),l.a.createElement(s.b,{path:"/entries/:id",element:l.a.createElement(g,null,l.a.createElement(M,null))}),l.a.createElement(s.b,{path:"/insights-goals",element:l.a.createElement(g,null,l.a.createElement(D,null))}),l.a.createElement(s.b,{path:"/settings",element:l.a.createElement(g,null,l.a.createElement(B,null))}),l.a.createElement(s.b,{path:"*",element:l.a.createElement(s.a,{to:"/",replace:!0})})))}a(474);var V=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,479)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:c}=t;a(e),n(e),l(e),r(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(F,null))),V()},59:function(e,t){},68:function(e,t){},97:function(e,t){}},[[251,1,2]]]);
//# sourceMappingURL=main.3472e666.chunk.js.map